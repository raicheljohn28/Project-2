<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Restaurant Rating</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; font-src 'self'> -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <link href="./assets/css/templatemo-style.css" rel="stylesheet">
    <link href="./assets/css/owl-carousel.css" rel="stylesheet">
    <link href="./assets/css/hero-slider.css" rel="stylesheet">
    <link href="./assets/css/fontAwesome.css" rel="stylesheet">
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/bootstrap.css.map" rel="stylesheet">
    <link href="./assets/css/bootstrap.css" rel="stylesheet">
    <link href="./assets/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="./assets/css/bootstrap-theme.css.map" rel="stylesheet">
    <link href="./assets/css/bootstrap-theme.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Spectral:200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="./assets/css/templatemo-style.css" rel="stylesheet">

    <!-- <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script> -->
</head>
<style>
    td,th {
        border: 1px solid #dddddd;
        text-align: left; 
        padding: 8px; 
    }
</style>
<body>
    <div class="header">
        <div class="container">
            <a href="#" class="navbar-brand scroll-top">Restaurant Rating App</a>
            <nav class="navbar navbar-inverse" role="navigation">
                <div class="navbar-header">
                    <button type="button" id="nav-toggle" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                        <!-- <span class="sr-only">Toggle navigation</span> -->
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!--/.navbar-header-->
                <div id="main-nav" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="index.html">Home</a>
                        </li>
                        <li>
                            <a href="review.html">Add Review</a>
                        </li>
                        <li>
                            <a href="signUp.html">SignUp/Login</a>
                        </li>
                    </ul>
                </div>
                <!--/.navbar-collapse-->
            </nav>
            <!--/.navbar-->
        </div>
        <!--/.container-->
    </div>
    <!--/.header-->


    <section class="banner">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <h4>The path to your own happiness is usually found in service!!</h4>
                    <!-- <h2>Restaurant Rating App</h2> -->
                    <!-- Search form -->

                </div>
            </div>
        </div>
    </section>



    <section id="book-table">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="heading">
                        <h2>Restaurant Rating App</h2>
                    </div>
                </div>
                <div class="col-md-4 col-md-offset-2 col-sm-12">
                    <div class="left-image">
                        <img src="./assets/image/book_left_image.jpg" alt="">
                    </div>
                </div>

                <div class="col-md-4 col-sm-12">

                    <div class="right-info">
                        <h4>Search Restaurant</h4>
                        <div class="input">
                            <form action="/api/viewRest" method="post">
                                <input type="text" name="restaurant" placeholder="ex; Red Lobster">
                                <button class="search">Search</button>
                            </form>
                                <h4>Add Restaurant</h4>
                                <div class="input">
                                    <form action="#" method="post">
                                        <input type="text" class="form-control" id="restaurant-name" rows="2" cols="40">
                                        <input type="text" class="form-control" id="restaurant-url" rows="2" cols="40">
                                        <input type="text" class="form-control" id="restaurant-rating" rows="2" cols="40">
                                        <button class="add">Add</button>
                                    </form>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="first"></div>



    <section class="featured-food">
        <div class="container">
            <div class="row">
                <div class="heading">
                    <h2>Recent Activity</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="food-item">
                        <h2>Longhorn</h2>
                        <img src="./assets/image/Longhorn-Steakhouse-Logo.jpg" alt="">
                        <div class="text-content">
                            <img src="./assets/image/Five-Star-Review-Icon.jpg" width="30px" alt="">
                            <p>Dreamcatcher squid ennui cliche chicharros nes echo small batch jean shorts hexagon street art
                                knausgaard wolf...</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="food-item">
                        <h2>Golden Corral</h2>
                        <img src="./assets/image/golden-corral2.png" alt="">
                        <div class="text-content">

                            <img src="./assets/image/Five-Star-Review-Icon.jpg" width="30px" alt="">
                            <p> chicharros nes echo small batch jean shorts hexagon street art knausgaard wolf...</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="food-item">
                        <h2>Red Lobster</h2>
                        <img src="./assets/image/red lobster.png" alt="">
                        <div class="text-content">

                            <img src="./assets/image/Five-Star-Review-Icon.jpg" width="30px" alt="">
                            <p>Dreamcatcher cliche chicharros nes echo small batch jean shorts hexagon street art knaus.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <section class="services">

        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <a href="#">
                            <img src="./assets/image/Raichel Mary John 2.jpg" alt="Breakfast">
                            <h4>Raichel John</h4>
                        </a>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <a href="#">
                            <img src="./assets/image/Modou Seck.jpeg" alt="Lunch">
                            <h4>Modou Seck</h4>
                        </a>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <a href="#">
                            <img src="./assets/image/Cristiane Abreu.jpg" alt="Dinner">
                            <h4>Cristiane Abreu</h4>
                        </a>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <a href="#">
                            <img src="./assets/image/hanna2.jpg" alt="Desserts">
                            <h4>Hannah Khan</h4>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </section>



    <footer>
        <div class="sign-up">
            <div class="row">
                <div class="col-md-4">
                    <p>Copyright &copy; 2018 Bootcamp</p>
                </div>
                <div class="col-md-4">

                </div>

            </div>
        </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
        // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
        // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
        // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file
        $(".add").on("click", function (event) {
            event.preventDefault();
            // Here we grab the form elements
            var newRestaurant = {
                restaurantName: $("#restaurant-name").val().trim(),
                restaurantUrl: $("#restaurant-url").val().trim(),
                restaurantRating: $("#restaurant-rating").val().trim(),
            };
            console.log(newRestaurant);
            // This line is the magic. It"s very similar to the standard ajax function we used.
            // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
            // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
            // depending on if a tables is available or not.
            $.post("/api/viewRest", newRestaurant,
                function (data) {
                    // If a table is available... tell user they are booked.
                    // if (data) {
                        console.log(data);
                        alert("Yay! New Restaurant has been added!");
                    // }
                    // If a table is available... tell user they on the waiting list.
                    //   else {
                    //     alert("Sorry an error occured");
                    //   }
                    // Clear the form when submitting
                    $("#restaurant-name").val("");
                    $("#restaurant-url").val("");
                    $("#restaurant-rating").val("");
                });
        });

        $("form").submit(function(e) {
            // console.log("hello");
            e.preventDefault();
            $.ajax("/api/viewRest", {
                type: "GET",

            }).then(function(data){
                var first = $("#first");
                console.log(data);
                

                for (var i = 0; i < data.length; i++){
                    first.append($("<table><thead><tr><th>Restaurant Name</th><th>Ratings</th></tr></thead><tbody><tr><td>" + data[i].restaurantName + "</td><td>" + data[i].rating + "</td></tr></tbody></table>"));

                }
                })
        });
    </script>

</body>

</html>